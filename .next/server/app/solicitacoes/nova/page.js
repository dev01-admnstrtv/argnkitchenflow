(()=>{var e={};e.id=874,e.ids=[874],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},75383:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>b,pages:()=>l,routeModule:()=>f,tree:()=>n}),r(65197),r(32029),r(35866);var t=r(23191),s=r(88716),o=r(37922),i=r.n(o),c=r(95231),d={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>c[e]);r.d(a,d);let n=["",{children:["solicitacoes",{children:["nova",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,65197)),"/mnt/e/Projetos/EngenhariaContextoPTbr/ArgnKitchenFlow/ArgnKitchenFlow/src/app/solicitacoes/nova/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"/mnt/e/Projetos/EngenhariaContextoPTbr/ArgnKitchenFlow/ArgnKitchenFlow/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],l=["/mnt/e/Projetos/EngenhariaContextoPTbr/ArgnKitchenFlow/ArgnKitchenFlow/src/app/solicitacoes/nova/page.tsx"],b="/solicitacoes/nova/page",u={require:r,loadChunk:()=>Promise.resolve()},f=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/solicitacoes/nova/page",pathname:"/solicitacoes/nova",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},72676:(e,a,r)=>{let t={"0e807a27a3d2522518fc0a46f91d0581d768a48f":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarAgrupamentos),"180e0e9c23642d3a8af36cbe61904e64209d2f37":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarAgrupamentosPorTipo),"21e0e306291fe2f05c26052d2e23ef8f23d646c5":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.criarProduto),"284954a5111b76295f11702df2d8619d725ee491":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarGruposProdutos),"39a0bdd73eafadc3b4f7c821657f6b2dd2cea175":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.criarAgrupamento),"556893c42f4bef40b907b69652abf26e8855d900":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarEstoqueProduto),"6e1eb1fc02349bea8e5f1717ea1e41d02d33040d":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.atualizarAgrupamento),"74c3969f7424ac6997a5f91ad7915fdb05f6b38f":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.deletarAgrupamento),"82441e11eb4d6c890c7abe727d3a1b4900c2b466":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarProdutos),"9d2a5fb567e9194a150ddc2aab125ce66576ba73":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.atualizarProduto),a3bd33b476d46f7f530b44a019b21a1b6a8f736e:()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarProdutoPorId),be483c5fd4a969b87cd54d10b08cae276c627df9:()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.gerarProximoCodigoProduto),c4945a9d374ba28cf161bc1c7636ce906c8f8663:()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarAgrupamentoPorId),edef01a99cb04eea5e097043735594da0f7ab5f9:()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.deletarProduto),"0528d4ad8b6c610c8c2589ad55a52be57de8b222":()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.verificarCapacidadePraca),"0800d3364d17d01c42d244ddba5eb89a1e606b33":()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarSolicitacoesPorPraca),"186023218c23d4660ab68d116fb1bce6f1b5e2d1":()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarPracasDestino),"4309c385f8ea009480721216f46e5661ae700b8f":()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarResumoSolicitacoesPraca),"64c7d6dc6be982e54ca62f8f6d65987dae39b1b8":()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarPracas),a80fb769720f9546a652d79dbb3e03b7a31d5f80:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.atualizarPraca),afaa7989aed9fdf686cf935160c227def127e953:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.alternarStatusPraca),b54bbe94c63e592254bc642d286490b1b7045ebe:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarPracaPorId),b8dee592d91e9906165d1b830076ca985a571f33:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.criarPraca),dfcf69d15ae7c807bfa8d8d4fa452c830b373e40:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarHistoricoSolicitacoesPorPraca),e5569a3421c899c43e1c24616818a3accfc05a79:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarEstatisticasPraca),"37ca45fa756f8685de66a0a84ea164df234da5af":()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.buscarSolicitacaoPorId),"5b43144e918d9633018d2a732523d2957d5c1a15":()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.getDailySolicitacoesStats),"6572249af1505a0ce0c5a992c44f4ac633902b93":()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.criarSolicitacao),"759e085f04bed7b70ac292e310d145857642a2cd":()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.buscarSolicitacoes),"944e83c1db3f9ec43cbac6391ad9cc436a335795":()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.atualizarStatusSolicitacao),b8a9fcac0a661ac3c5eb68b0037850123b7d94a5:()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.deletarSolicitacao),c0a962a03b467a45c784738a557f57e7ce13d407:()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.atualizarSolicitacao)};async function s(e,...a){return(await t[e]()).apply(null,a)}e.exports={"0e807a27a3d2522518fc0a46f91d0581d768a48f":s.bind(null,"0e807a27a3d2522518fc0a46f91d0581d768a48f"),"180e0e9c23642d3a8af36cbe61904e64209d2f37":s.bind(null,"180e0e9c23642d3a8af36cbe61904e64209d2f37"),"21e0e306291fe2f05c26052d2e23ef8f23d646c5":s.bind(null,"21e0e306291fe2f05c26052d2e23ef8f23d646c5"),"284954a5111b76295f11702df2d8619d725ee491":s.bind(null,"284954a5111b76295f11702df2d8619d725ee491"),"39a0bdd73eafadc3b4f7c821657f6b2dd2cea175":s.bind(null,"39a0bdd73eafadc3b4f7c821657f6b2dd2cea175"),"556893c42f4bef40b907b69652abf26e8855d900":s.bind(null,"556893c42f4bef40b907b69652abf26e8855d900"),"6e1eb1fc02349bea8e5f1717ea1e41d02d33040d":s.bind(null,"6e1eb1fc02349bea8e5f1717ea1e41d02d33040d"),"74c3969f7424ac6997a5f91ad7915fdb05f6b38f":s.bind(null,"74c3969f7424ac6997a5f91ad7915fdb05f6b38f"),"82441e11eb4d6c890c7abe727d3a1b4900c2b466":s.bind(null,"82441e11eb4d6c890c7abe727d3a1b4900c2b466"),"9d2a5fb567e9194a150ddc2aab125ce66576ba73":s.bind(null,"9d2a5fb567e9194a150ddc2aab125ce66576ba73"),a3bd33b476d46f7f530b44a019b21a1b6a8f736e:s.bind(null,"a3bd33b476d46f7f530b44a019b21a1b6a8f736e"),be483c5fd4a969b87cd54d10b08cae276c627df9:s.bind(null,"be483c5fd4a969b87cd54d10b08cae276c627df9"),c4945a9d374ba28cf161bc1c7636ce906c8f8663:s.bind(null,"c4945a9d374ba28cf161bc1c7636ce906c8f8663"),edef01a99cb04eea5e097043735594da0f7ab5f9:s.bind(null,"edef01a99cb04eea5e097043735594da0f7ab5f9"),"0528d4ad8b6c610c8c2589ad55a52be57de8b222":s.bind(null,"0528d4ad8b6c610c8c2589ad55a52be57de8b222"),"0800d3364d17d01c42d244ddba5eb89a1e606b33":s.bind(null,"0800d3364d17d01c42d244ddba5eb89a1e606b33"),"186023218c23d4660ab68d116fb1bce6f1b5e2d1":s.bind(null,"186023218c23d4660ab68d116fb1bce6f1b5e2d1"),"4309c385f8ea009480721216f46e5661ae700b8f":s.bind(null,"4309c385f8ea009480721216f46e5661ae700b8f"),"64c7d6dc6be982e54ca62f8f6d65987dae39b1b8":s.bind(null,"64c7d6dc6be982e54ca62f8f6d65987dae39b1b8"),a80fb769720f9546a652d79dbb3e03b7a31d5f80:s.bind(null,"a80fb769720f9546a652d79dbb3e03b7a31d5f80"),afaa7989aed9fdf686cf935160c227def127e953:s.bind(null,"afaa7989aed9fdf686cf935160c227def127e953"),b54bbe94c63e592254bc642d286490b1b7045ebe:s.bind(null,"b54bbe94c63e592254bc642d286490b1b7045ebe"),b8dee592d91e9906165d1b830076ca985a571f33:s.bind(null,"b8dee592d91e9906165d1b830076ca985a571f33"),dfcf69d15ae7c807bfa8d8d4fa452c830b373e40:s.bind(null,"dfcf69d15ae7c807bfa8d8d4fa452c830b373e40"),e5569a3421c899c43e1c24616818a3accfc05a79:s.bind(null,"e5569a3421c899c43e1c24616818a3accfc05a79"),"37ca45fa756f8685de66a0a84ea164df234da5af":s.bind(null,"37ca45fa756f8685de66a0a84ea164df234da5af"),"5b43144e918d9633018d2a732523d2957d5c1a15":s.bind(null,"5b43144e918d9633018d2a732523d2957d5c1a15"),"6572249af1505a0ce0c5a992c44f4ac633902b93":s.bind(null,"6572249af1505a0ce0c5a992c44f4ac633902b93"),"759e085f04bed7b70ac292e310d145857642a2cd":s.bind(null,"759e085f04bed7b70ac292e310d145857642a2cd"),"944e83c1db3f9ec43cbac6391ad9cc436a335795":s.bind(null,"944e83c1db3f9ec43cbac6391ad9cc436a335795"),b8a9fcac0a661ac3c5eb68b0037850123b7d94a5:s.bind(null,"b8a9fcac0a661ac3c5eb68b0037850123b7d94a5"),c0a962a03b467a45c784738a557f57e7ce13d407:s.bind(null,"c0a962a03b467a45c784738a557f57e7ce13d407")}},23059:(e,a,r)=>{Promise.resolve().then(r.bind(r,18549))},35047:(e,a,r)=>{"use strict";var t=r(77389);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},18549:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>E});var t=r(10326),s=r(17577),o=r(35047);r(45484),r(66128);var i=r(85277),c=r(91664),d=r(29752),n=r(41190),l=r(38443),b=r(64296),u=r(24050),f=r(41335),h=r(56929),m=r(75901),x=r(88004),g=r(8977);let p=(0,r(87926).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var v=r(11480),y=r(92332),j=r(24242),w=r(8183),N=r(73183),P=r(90434),_=r(46226);function S(){let e=(0,o.useRouter)(),a=(0,o.useSearchParams)().get("produto"),[r,S]=(0,s.useState)([]),[E,k]=(0,s.useState)([]),[q,C]=(0,s.useState)([]),[Z,D]=(0,s.useState)(""),[A,z]=(0,s.useState)(!1),[M,I]=(0,s.useState)(!1),[F,O]=(0,s.useState)(!1),[R,K]=(0,s.useState)({praca_destino_id:"",solicitante:"",prioridade:"normal",observacoes:"",tipo:"saida",data_entrega:new Date().toISOString().split("T")[0],janela_entrega:"manha",itens:[]}),L=()=>{C(E.filter(e=>e.descricao.toLowerCase().includes(Z.toLowerCase())||e.produto_id.toLowerCase().includes(Z.toLowerCase())))},T=e=>{let a={produto_id:e.id,quantidade_solicitada:1,observacoes:"",produto:e,timestamp:Date.now()};K(e=>({...e,itens:[a,...e.itens]})),I(!1),D("")},$=e=>{K(a=>({...a,itens:a.itens.filter(a=>a.timestamp!==e)}))},H=(e,a,r)=>{K(t=>({...t,itens:t.itens.map(t=>t.timestamp===e?{...t,[a]:r}:t)}))},V=async r=>{if(r.preventDefault(),!F){z(!0),O(!0);try{if(a&&!R.observacoes.trim()){alert("Para solicita\xe7\xe3o direta de produto, a observa\xe7\xe3o \xe9 obrigat\xf3ria!"),z(!1),O(!1);return}let r=new FormData;r.append("praca_destino_id",R.praca_destino_id),r.append("solicitante",R.solicitante),r.append("prioridade",R.prioridade),r.append("observacoes",R.observacoes),r.append("tipo",R.tipo),r.append("data_entrega",R.data_entrega),r.append("janela_entrega",R.janela_entrega),r.append("itens",JSON.stringify(R.itens));let t=await (0,i.SO)(r);t.success?e.push("/solicitacoes"):(alert("Erro ao criar solicita\xe7\xe3o: "+t.error),O(!1))}catch(e){console.error("Erro ao criar solicita\xe7\xe3o:",e),alert("Erro ao criar solicita\xe7\xe3o"),O(!1)}finally{z(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsxs)("header",{className:"relative backdrop-blur-xl bg-white/80 border-b border-white/20 shadow-lg",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/5 to-blue-500/5"}),t.jsx("div",{className:"relative container mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[t.jsx(c.z,{variant:"outline",asChild:!0,className:"hover-lift glass-card",children:(0,t.jsxs)(P.default,{href:"/solicitacoes",children:[t.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Voltar"]})}),t.jsx(_.default,{src:"https://www.administrative.com.br/aragon/aragon.png",alt:"Logo do Restaurante",width:40,height:40,className:"rounded-lg shadow-lg ring-2 ring-white/50"}),t.jsx("div",{className:"w-20"})]})})]}),t.jsx("div",{className:"container mx-auto px-4 py-4 bg-gradient-to-r from-green-50/50 to-blue-50/50",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"➕ Nova Solicita\xe7\xe3o"}),t.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Crie uma nova solicita\xe7\xe3o de produtos"})]})}),t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("form",{onSubmit:V,className:"space-y-8",children:[t.jsx("div",{className:"animate-fade-in",children:(0,t.jsxs)(d.Zb,{className:"bg-white border-2 border-gray-200 shadow-xl hover:shadow-2xl transition-shadow duration-300",children:[t.jsx(d.Ol,{className:"pb-4 bg-gradient-to-r from-slate-50 to-gray-50 border-b border-gray-200",children:(0,t.jsxs)(d.ll,{className:"flex items-center gap-3 text-xl text-gray-800",children:[t.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600 shadow-lg border border-blue-200",children:t.jsx(u.Z,{className:"h-5 w-5 text-white"})}),"\uD83D\uDCDD Informa\xe7\xf5es B\xe1sicas"]})}),(0,t.jsxs)(d.aY,{className:"space-y-6 pt-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold mb-3 text-gray-700",children:[t.jsx(f.Z,{className:"h-4 w-4"}),"Pra\xe7a de Destino *"]}),(0,t.jsxs)("select",{value:R.praca_destino_id,onChange:e=>K(a=>({...a,praca_destino_id:e.target.value})),required:!0,className:"w-full p-3 border-2 border-gray-300 bg-white rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base shadow-sm",children:[t.jsx("option",{value:"",children:"Selecione uma pra\xe7a"}),r.map(e=>t.jsx("option",{value:e.id,children:e.nome},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold mb-3 text-gray-700",children:[t.jsx(h.Z,{className:"h-4 w-4"}),"Solicitante *"]}),t.jsx(n.I,{type:"text",value:R.solicitante,onChange:e=>K(a=>({...a,solicitante:e.target.value})),required:!0,className:"w-full p-3 border-2 border-gray-300 bg-white rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base shadow-sm",placeholder:"Digite seu nome"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold mb-3 text-gray-700",children:[t.jsx(m.Z,{className:"h-4 w-4"}),"Prioridade"]}),(0,t.jsxs)("select",{value:R.prioridade,onChange:e=>K(a=>({...a,prioridade:e.target.value})),className:"w-full p-3 border-2 border-gray-300 bg-white rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base shadow-sm",children:[t.jsx("option",{value:"baixa",children:"Baixa"}),t.jsx("option",{value:"normal",children:"Normal"}),t.jsx("option",{value:"alta",children:"Alta"}),t.jsx("option",{value:"urgente",children:"Urgente"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold mb-3 text-gray-700",children:[t.jsx(x.Z,{className:"h-4 w-4"}),"Data de Entrega *"]}),t.jsx(n.I,{type:"date",value:R.data_entrega,onChange:e=>K(a=>({...a,data_entrega:e.target.value})),required:!0,className:"h-12 text-base border-2 border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-xl bg-white shadow-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold mb-3 text-gray-700",children:[t.jsx(g.Z,{className:"h-4 w-4"}),"Janela de Entrega"]}),(0,t.jsxs)("select",{value:R.janela_entrega,onChange:e=>K(a=>({...a,janela_entrega:e.target.value})),className:"w-full p-3 border-2 border-gray-300 bg-white rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base shadow-sm",children:[t.jsx("option",{value:"manha",children:"Manh\xe3"}),t.jsx("option",{value:"tarde",children:"Tarde"}),t.jsx("option",{value:"noite",children:"Noite"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-semibold mb-3 text-gray-700",children:[t.jsx(p,{className:"h-4 w-4"}),"Observa\xe7\xf5es"]}),t.jsx("textarea",{value:R.observacoes,onChange:e=>K(a=>({...a,observacoes:e.target.value})),rows:3,className:"w-full p-3 border-2 border-gray-300 bg-white rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-base resize-none shadow-sm",placeholder:"Observa\xe7\xf5es adicionais..."})]})]})]})}),t.jsx("div",{className:"animate-fade-in",children:(0,t.jsxs)(d.Zb,{className:"bg-white border-2 border-gray-200 shadow-xl hover:shadow-2xl transition-shadow duration-300",children:[t.jsx(d.Ol,{className:"pb-4 bg-gradient-to-r from-slate-50 to-gray-50 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)(d.ll,{className:"flex items-center gap-3 text-xl text-gray-800",children:[t.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-green-600 to-teal-600 shadow-lg border border-green-200",children:t.jsx(v.Z,{className:"h-5 w-5 text-white"})}),"\uD83D\uDCE6 Itens da Solicita\xe7\xe3o"]}),(0,t.jsxs)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>I(!M),className:"border-2 border-gray-300 hover:border-blue-500 hover:bg-blue-50 hover:text-blue-700 transition-all duration-200",children:[t.jsx(y.Z,{className:"h-4 w-4 mr-2"}),t.jsx(j.Z,{className:"h-4 w-4 mr-1"}),"Adicionar Item"]})]})}),(0,t.jsxs)(d.aY,{className:"pt-6",children:[M&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-white border-2 border-gray-200 rounded-xl shadow-lg animate-slide-up",children:[t.jsx("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(w.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 h-5 w-5"}),t.jsx(n.I,{type:"text",placeholder:"Pesquisar produtos por nome ou c\xf3digo...",value:Z,onChange:e=>D(e.target.value),onKeyPress:e=>"Enter"===e.key&&L(),className:"pl-12 h-12 text-base border-2 border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-xl bg-white shadow-sm"})]})}),t.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:q.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-blue-50 rounded-lg cursor-pointer transition-all duration-200 border border-gray-200 hover:border-blue-300",onClick:()=>T(e),children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-semibold text-gray-800",children:e.descricao}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[t.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs border",children:e.produto_id}),t.jsx("span",{className:"mx-2",children:"|"}),t.jsx("span",{children:e.grupo})]})]}),t.jsx(l.C,{variant:"outline",className:"bg-gradient-to-r from-gray-100 to-gray-200 border-gray-300",children:e.tipo})]},e.id))})]}),0===R.itens.length?t.jsx("div",{className:"text-center py-16",children:(0,t.jsxs)("div",{className:"bg-white border-2 border-gray-200 p-12 rounded-2xl shadow-lg max-w-md mx-auto",children:[(0,t.jsxs)("div",{className:"relative mb-6",children:[t.jsx(v.Z,{className:"mx-auto h-16 w-16 text-gray-400"}),t.jsx("div",{className:"absolute -top-2 -right-2",children:t.jsx("div",{className:"w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center",children:t.jsx(m.Z,{className:"h-3 w-3 text-white fill-current"})})})]}),t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Nenhum item adicionado"}),t.jsx("p",{className:"text-gray-600 mb-6",children:'Clique em "Adicionar Item" para come\xe7ar a montar sua solicita\xe7\xe3o'}),(0,t.jsxs)(c.z,{type:"button",onClick:()=>I(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white border-0 hover:shadow-xl hover:scale-105 transition-all duration-200",children:[t.jsx(y.Z,{className:"h-4 w-4 mr-2"}),t.jsx(j.Z,{className:"h-4 w-4 mr-1"}),"Adicionar Primeiro Item"]})]})}):t.jsx("div",{className:"space-y-4",children:R.itens.sort((e,a)=>(a.timestamp||0)-(e.timestamp||0)).map((e,a)=>(0,t.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 shadow-lg hover:shadow-xl transition-shadow duration-300",style:{animationDelay:`${100*a}ms`},children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-600 to-purple-600 shadow-sm border border-blue-200",children:t.jsx(v.Z,{className:"h-4 w-4 text-white"})}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-semibold text-gray-800",children:e.produto?.descricao}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[t.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs border",children:e.produto?.produto_id}),t.jsx("span",{className:"mx-2",children:"|"}),t.jsx("span",{children:e.produto?.grupo})]})]})]}),t.jsx(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>$(e.timestamp||0),className:"border-2 border-gray-300 hover:border-red-500 hover:bg-red-50 hover:text-red-700 transition-all duration-200",children:t.jsx(N.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"\uD83D\uDCCA Quantidade *"}),t.jsx(n.I,{type:"number",step:"0.01",min:"0.01",value:e.quantidade_solicitada,onChange:a=>H(e.timestamp||0,"quantidade_solicitada",parseFloat(a.target.value)||0),required:!0,className:"h-10 text-base border-2 border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg bg-white shadow-sm"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-semibold mb-2 text-gray-700",children:"\uD83D\uDCAC Observa\xe7\xf5es"}),t.jsx(n.I,{type:"text",value:e.observacoes||"",onChange:a=>H(e.timestamp||0,"observacoes",a.target.value),placeholder:"Observa\xe7\xf5es do item...",className:"h-10 text-base border-2 border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg bg-white shadow-sm"})]})]})]},e.timestamp||a))})]})]})}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[t.jsx(c.z,{type:"button",variant:"outline",onClick:()=>e.back(),className:"border-2 border-gray-300 hover:border-red-500 hover:bg-red-50 hover:text-red-700 transition-all duration-200",children:"Cancelar"}),t.jsx(c.z,{type:"submit",disabled:A||0===R.itens.length||F,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white border-0 hover:shadow-xl hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:A?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Criando..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Criar Solicita\xe7\xe3o"]})})]})]})})})]})}function E(){return t.jsx(s.Suspense,{fallback:t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"glass-card p-8 rounded-3xl shadow-xl",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 text-center",children:"Carregando..."})]})}),children:t.jsx(S,{})})}},38443:(e,a,r)=>{"use strict";r.d(a,{C:()=>o});var t=r(10326);r(17577);var s=r(51223);function o({className:e,variant:a="default",...r}){return t.jsx("div",{className:(0,s.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}[a],e),...r})}},85277:(e,a,r)=>{"use strict";r.d(a,{MK:()=>o,SO:()=>s,W:()=>c,he:()=>i}),r(15424);var t=r(46242);(0,t.$)("5b43144e918d9633018d2a732523d2957d5c1a15");var s=(0,t.$)("6572249af1505a0ce0c5a992c44f4ac633902b93"),o=(0,t.$)("759e085f04bed7b70ac292e310d145857642a2cd");(0,t.$)("37ca45fa756f8685de66a0a84ea164df234da5af"),(0,t.$)("944e83c1db3f9ec43cbac6391ad9cc436a335795");var i=(0,t.$)("c0a962a03b467a45c784738a557f57e7ce13d407"),c=(0,t.$)("b8a9fcac0a661ac3c5eb68b0037850123b7d94a5")},65197:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$typeof:()=>i,__esModule:()=>o,default:()=>c});var t=r(68570);let s=(0,t.createProxy)(String.raw`/mnt/e/Projetos/EngenhariaContextoPTbr/ArgnKitchenFlow/ArgnKitchenFlow/src/app/solicitacoes/nova/page.tsx`),{__esModule:o,$$typeof:i}=s;s.default;let c=(0,t.createProxy)(String.raw`/mnt/e/Projetos/EngenhariaContextoPTbr/ArgnKitchenFlow/ArgnKitchenFlow/src/app/solicitacoes/nova/page.tsx#default`)},1957:(e,a,r)=>{"use strict";r.r(a),r.d(a,{atualizarSolicitacao:()=>b,atualizarStatusSolicitacao:()=>l,buscarSolicitacaoPorId:()=>n,buscarSolicitacoes:()=>d,criarSolicitacao:()=>c,deletarSolicitacao:()=>u,getDailySolicitacoesStats:()=>f});var t=r(27745);r(26461);var s=r(1862),o=r(18101),i=r(30207);async function c(e){try{let a=(0,s.createServiceClient)(),r={praca_destino_id:e.get("praca_destino_id"),solicitante:e.get("solicitante"),prioridade:e.get("prioridade"),observacoes:e.get("observacoes"),tipo:e.get("tipo"),data_entrega:e.get("data_entrega"),janela_entrega:e.get("janela_entrega"),itens:JSON.parse(e.get("itens")||"[]")},t=o.solicitacaoSchema.parse(r),{data:c,error:d}=await a.from("solicitacoes").insert({solicitante_id:"0f4a00bb-a9fd-4e00-ad29-f6e2bf1b4d47",solicitante:t.solicitante,praca_destino_id:t.praca_destino_id,prioridade:t.prioridade,observacoes:t.observacoes,tipo:t.tipo,data_entrega:t.data_entrega,janela_entrega:t.janela_entrega,loja:"Aragon"}).select().single();if(d)throw Error("Erro ao criar solicita\xe7\xe3o: "+d.message);let n=t.itens.map(e=>({solicitacao_id:c.id,produto_id:e.produto_id,quantidade_solicitada:e.quantidade_solicitada,observacoes:e.observacoes})),{error:l}=await a.from("itens_solicitacao").insert(n);if(l)throw Error("Erro ao criar itens da solicita\xe7\xe3o: "+l.message);return(0,i.revalidatePath)("/solicitacoes"),{success:!0,id:c.id}}catch(e){return console.error("Erro ao criar solicita\xe7\xe3o:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function d(e,a=1,r=30){try{let t=(0,s.createServiceClient)(),o=(a-1)*r,i=t.from("solicitacoes").select(`
        *,
        praca_destino:pracas_destino(*),
        solicitante,
        itens:itens_solicitacao(
          *,
          produto:produtos(*)
        )
      `).order("data_entrega",{ascending:!1}).range(o,o+r-1);e&&(i=i.eq("solicitante_id",e));let{data:c,error:d}=await i;if(d)throw Error("Erro ao buscar solicita\xe7\xf5es: "+d.message);return{success:!0,data:c}}catch(e){return console.error("Erro ao buscar solicita\xe7\xf5es:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function n(e){try{let a=(0,s.createServiceClient)(),{data:r,error:t}=await a.from("solicitacoes").select(`
        *,
        praca_destino:pracas_destino(*),
        solicitante,
        itens:itens_solicitacao(
          *,
          produto:produtos(*)
        )
      `).eq("id",e).single();if(t)throw Error("Erro ao buscar solicita\xe7\xe3o: "+t.message);return{success:!0,data:r}}catch(e){return console.error("Erro ao buscar solicita\xe7\xe3o:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function l(e,a){try{let r=(0,s.createServiceClient)(),{error:t}=await r.from("solicitacoes").update({status:a}).eq("id",e);if(t)throw Error("Erro ao atualizar status: "+t.message);return(0,i.revalidatePath)("/solicitacoes"),(0,i.revalidatePath)("/dashboard"),{success:!0}}catch(e){return console.error("Erro ao atualizar status:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function b(e,a){try{let r=(0,s.createServiceClient)(),t={praca_destino_id:a.get("praca_destino_id"),prioridade:a.get("prioridade"),observacoes:a.get("observacoes"),tipo:a.get("tipo"),data_entrega:a.get("data_entrega"),janela_entrega:a.get("janela_entrega"),itens:JSON.parse(a.get("itens")||"[]")},c=o.solicitacaoSchema.parse(t),{data:d,error:n}=await r.from("solicitacoes").select("status").eq("id",e).single();if(n)throw Error("Erro ao buscar solicita\xe7\xe3o: "+n.message);if("pendente"!==d.status)throw Error("N\xe3o \xe9 poss\xedvel editar solicita\xe7\xe3o que n\xe3o est\xe1 pendente");let{error:l}=await r.from("solicitacoes").update({praca_destino_id:c.praca_destino_id,prioridade:c.prioridade,observacoes:c.observacoes,tipo:c.tipo,data_entrega:c.data_entrega,janela_entrega:c.janela_entrega}).eq("id",e);if(l)throw Error("Erro ao atualizar solicita\xe7\xe3o: "+l.message);let{error:b}=await r.from("itens_solicitacao").delete().eq("solicitacao_id",e);if(b)throw Error("Erro ao deletar itens existentes: "+b.message);let u=c.itens.map(a=>({solicitacao_id:e,produto_id:a.produto_id,quantidade_solicitada:a.quantidade_solicitada,observacoes:a.observacoes})),{error:f}=await r.from("itens_solicitacao").insert(u);if(f)throw Error("Erro ao criar novos itens da solicita\xe7\xe3o: "+f.message);return(0,i.revalidatePath)("/solicitacoes"),{success:!0}}catch(e){return console.error("Erro ao atualizar solicita\xe7\xe3o:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function u(e){try{let a=(0,s.createServiceClient)(),{data:r,error:t}=await a.from("solicitacoes").select(`
        status,
        itens:itens_solicitacao(status_separacao)
      `).eq("id",e).single();if(t)throw Error("Erro ao buscar solicita\xe7\xe3o: "+t.message);if(!r.itens.every(e=>"aguardando"===e.status_separacao))throw Error('N\xe3o \xe9 poss\xedvel deletar solicita\xe7\xe3o que possui itens fora do status "Aguardando"');let{error:o}=await a.from("solicitacoes").delete().eq("id",e);if(o)throw Error("Erro ao deletar solicita\xe7\xe3o: "+o.message);return(0,i.revalidatePath)("/solicitacoes"),{success:!0}}catch(e){return console.error("Erro ao deletar solicita\xe7\xe3o:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function f(){try{let e=(0,s.createServiceClient)(),a=new Date;a.setHours(0,0,0,0);let r=new Date(a);r.setDate(r.getDate()+1);let t=new Date(a);t.setDate(t.getDate()-1);let{count:o,error:i}=await e.from("solicitacoes").select("*",{count:"exact",head:!0}).gte("created_at",a.toISOString()).lt("created_at",r.toISOString());if(i)throw Error(i.message);let{count:c,error:d}=await e.from("solicitacoes").select("*",{count:"exact",head:!0}).gte("created_at",t.toISOString()).lt("created_at",a.toISOString());if(d)throw Error(d.message);return{success:!0,data:{today:o||0,variation:parseFloat((c&&c>0?((o||0)-c)/c*100:(o||0)>0?100:0).toFixed(2))}}}catch(e){return console.error("Erro ao buscar estat\xedsticas di\xe1rias de solicita\xe7\xf5es:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}(0,r(85723).ensureServerEntryExports)([c,d,n,l,b,u,f]),(0,t.registerServerReference)("6572249af1505a0ce0c5a992c44f4ac633902b93",c),(0,t.registerServerReference)("759e085f04bed7b70ac292e310d145857642a2cd",d),(0,t.registerServerReference)("37ca45fa756f8685de66a0a84ea164df234da5af",n),(0,t.registerServerReference)("944e83c1db3f9ec43cbac6391ad9cc436a335795",l),(0,t.registerServerReference)("c0a962a03b467a45c784738a557f57e7ce13d407",b),(0,t.registerServerReference)("b8a9fcac0a661ac3c5eb68b0037850123b7d94a5",u),(0,t.registerServerReference)("5b43144e918d9633018d2a732523d2957d5c1a15",f)},64296:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},88004:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},8977:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},24050:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},41335:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},11480:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]])},92332:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8183:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},24242:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},75901:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},73183:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},56929:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[972,130,404,207,592,285,629,801],()=>r(75383));module.exports=t})();