(()=>{var e={};e.id=515,e.ids=[515],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},37900:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>c.a,__next_app__:()=>u,originalPathname:()=>b,pages:()=>l,routeModule:()=>f,tree:()=>n}),r(82272),r(32029),r(35866);var t=r(23191),s=r(88716),i=r(37922),c=r.n(i),o=r(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(a,d);let n=["",{children:["solicitacoes",{children:["[id]",{children:["editar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,82272)),"/mnt/e/Projetos/EngenhariaContextoPTbr/ArgnKitchenFlow/ArgnKitchenFlow/src/app/solicitacoes/[id]/editar/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"/mnt/e/Projetos/EngenhariaContextoPTbr/ArgnKitchenFlow/ArgnKitchenFlow/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],l=["/mnt/e/Projetos/EngenhariaContextoPTbr/ArgnKitchenFlow/ArgnKitchenFlow/src/app/solicitacoes/[id]/editar/page.tsx"],b="/solicitacoes/[id]/editar/page",u={require:r,loadChunk:()=>Promise.resolve()},f=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/solicitacoes/[id]/editar/page",pathname:"/solicitacoes/[id]/editar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},72380:(e,a,r)=>{let t={"37ca45fa756f8685de66a0a84ea164df234da5af":()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.buscarSolicitacaoPorId),"5b43144e918d9633018d2a732523d2957d5c1a15":()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.getDailySolicitacoesStats),"6572249af1505a0ce0c5a992c44f4ac633902b93":()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.criarSolicitacao),"759e085f04bed7b70ac292e310d145857642a2cd":()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.buscarSolicitacoes),"944e83c1db3f9ec43cbac6391ad9cc436a335795":()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.atualizarStatusSolicitacao),b8a9fcac0a661ac3c5eb68b0037850123b7d94a5:()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.deletarSolicitacao),c0a962a03b467a45c784738a557f57e7ce13d407:()=>Promise.resolve().then(r.bind(r,1957)).then(e=>e.atualizarSolicitacao),"0e807a27a3d2522518fc0a46f91d0581d768a48f":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarAgrupamentos),"180e0e9c23642d3a8af36cbe61904e64209d2f37":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarAgrupamentosPorTipo),"21e0e306291fe2f05c26052d2e23ef8f23d646c5":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.criarProduto),"284954a5111b76295f11702df2d8619d725ee491":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarGruposProdutos),"39a0bdd73eafadc3b4f7c821657f6b2dd2cea175":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.criarAgrupamento),"556893c42f4bef40b907b69652abf26e8855d900":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarEstoqueProduto),"6e1eb1fc02349bea8e5f1717ea1e41d02d33040d":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.atualizarAgrupamento),"74c3969f7424ac6997a5f91ad7915fdb05f6b38f":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.deletarAgrupamento),"82441e11eb4d6c890c7abe727d3a1b4900c2b466":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarProdutos),"9d2a5fb567e9194a150ddc2aab125ce66576ba73":()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.atualizarProduto),a3bd33b476d46f7f530b44a019b21a1b6a8f736e:()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarProdutoPorId),be483c5fd4a969b87cd54d10b08cae276c627df9:()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.gerarProximoCodigoProduto),c4945a9d374ba28cf161bc1c7636ce906c8f8663:()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.buscarAgrupamentoPorId),edef01a99cb04eea5e097043735594da0f7ab5f9:()=>Promise.resolve().then(r.bind(r,145)).then(e=>e.deletarProduto),"0528d4ad8b6c610c8c2589ad55a52be57de8b222":()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.verificarCapacidadePraca),"0800d3364d17d01c42d244ddba5eb89a1e606b33":()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarSolicitacoesPorPraca),"186023218c23d4660ab68d116fb1bce6f1b5e2d1":()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarPracasDestino),"4309c385f8ea009480721216f46e5661ae700b8f":()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarResumoSolicitacoesPraca),"64c7d6dc6be982e54ca62f8f6d65987dae39b1b8":()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarPracas),a80fb769720f9546a652d79dbb3e03b7a31d5f80:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.atualizarPraca),afaa7989aed9fdf686cf935160c227def127e953:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.alternarStatusPraca),b54bbe94c63e592254bc642d286490b1b7045ebe:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarPracaPorId),b8dee592d91e9906165d1b830076ca985a571f33:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.criarPraca),dfcf69d15ae7c807bfa8d8d4fa452c830b373e40:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarHistoricoSolicitacoesPorPraca),e5569a3421c899c43e1c24616818a3accfc05a79:()=>Promise.resolve().then(r.bind(r,97342)).then(e=>e.buscarEstatisticasPraca)};async function s(e,...a){return(await t[e]()).apply(null,a)}e.exports={"37ca45fa756f8685de66a0a84ea164df234da5af":s.bind(null,"37ca45fa756f8685de66a0a84ea164df234da5af"),"5b43144e918d9633018d2a732523d2957d5c1a15":s.bind(null,"5b43144e918d9633018d2a732523d2957d5c1a15"),"6572249af1505a0ce0c5a992c44f4ac633902b93":s.bind(null,"6572249af1505a0ce0c5a992c44f4ac633902b93"),"759e085f04bed7b70ac292e310d145857642a2cd":s.bind(null,"759e085f04bed7b70ac292e310d145857642a2cd"),"944e83c1db3f9ec43cbac6391ad9cc436a335795":s.bind(null,"944e83c1db3f9ec43cbac6391ad9cc436a335795"),b8a9fcac0a661ac3c5eb68b0037850123b7d94a5:s.bind(null,"b8a9fcac0a661ac3c5eb68b0037850123b7d94a5"),c0a962a03b467a45c784738a557f57e7ce13d407:s.bind(null,"c0a962a03b467a45c784738a557f57e7ce13d407"),"0e807a27a3d2522518fc0a46f91d0581d768a48f":s.bind(null,"0e807a27a3d2522518fc0a46f91d0581d768a48f"),"180e0e9c23642d3a8af36cbe61904e64209d2f37":s.bind(null,"180e0e9c23642d3a8af36cbe61904e64209d2f37"),"21e0e306291fe2f05c26052d2e23ef8f23d646c5":s.bind(null,"21e0e306291fe2f05c26052d2e23ef8f23d646c5"),"284954a5111b76295f11702df2d8619d725ee491":s.bind(null,"284954a5111b76295f11702df2d8619d725ee491"),"39a0bdd73eafadc3b4f7c821657f6b2dd2cea175":s.bind(null,"39a0bdd73eafadc3b4f7c821657f6b2dd2cea175"),"556893c42f4bef40b907b69652abf26e8855d900":s.bind(null,"556893c42f4bef40b907b69652abf26e8855d900"),"6e1eb1fc02349bea8e5f1717ea1e41d02d33040d":s.bind(null,"6e1eb1fc02349bea8e5f1717ea1e41d02d33040d"),"74c3969f7424ac6997a5f91ad7915fdb05f6b38f":s.bind(null,"74c3969f7424ac6997a5f91ad7915fdb05f6b38f"),"82441e11eb4d6c890c7abe727d3a1b4900c2b466":s.bind(null,"82441e11eb4d6c890c7abe727d3a1b4900c2b466"),"9d2a5fb567e9194a150ddc2aab125ce66576ba73":s.bind(null,"9d2a5fb567e9194a150ddc2aab125ce66576ba73"),a3bd33b476d46f7f530b44a019b21a1b6a8f736e:s.bind(null,"a3bd33b476d46f7f530b44a019b21a1b6a8f736e"),be483c5fd4a969b87cd54d10b08cae276c627df9:s.bind(null,"be483c5fd4a969b87cd54d10b08cae276c627df9"),c4945a9d374ba28cf161bc1c7636ce906c8f8663:s.bind(null,"c4945a9d374ba28cf161bc1c7636ce906c8f8663"),edef01a99cb04eea5e097043735594da0f7ab5f9:s.bind(null,"edef01a99cb04eea5e097043735594da0f7ab5f9"),"0528d4ad8b6c610c8c2589ad55a52be57de8b222":s.bind(null,"0528d4ad8b6c610c8c2589ad55a52be57de8b222"),"0800d3364d17d01c42d244ddba5eb89a1e606b33":s.bind(null,"0800d3364d17d01c42d244ddba5eb89a1e606b33"),"186023218c23d4660ab68d116fb1bce6f1b5e2d1":s.bind(null,"186023218c23d4660ab68d116fb1bce6f1b5e2d1"),"4309c385f8ea009480721216f46e5661ae700b8f":s.bind(null,"4309c385f8ea009480721216f46e5661ae700b8f"),"64c7d6dc6be982e54ca62f8f6d65987dae39b1b8":s.bind(null,"64c7d6dc6be982e54ca62f8f6d65987dae39b1b8"),a80fb769720f9546a652d79dbb3e03b7a31d5f80:s.bind(null,"a80fb769720f9546a652d79dbb3e03b7a31d5f80"),afaa7989aed9fdf686cf935160c227def127e953:s.bind(null,"afaa7989aed9fdf686cf935160c227def127e953"),b54bbe94c63e592254bc642d286490b1b7045ebe:s.bind(null,"b54bbe94c63e592254bc642d286490b1b7045ebe"),b8dee592d91e9906165d1b830076ca985a571f33:s.bind(null,"b8dee592d91e9906165d1b830076ca985a571f33"),dfcf69d15ae7c807bfa8d8d4fa452c830b373e40:s.bind(null,"dfcf69d15ae7c807bfa8d8d4fa452c830b373e40"),e5569a3421c899c43e1c24616818a3accfc05a79:s.bind(null,"e5569a3421c899c43e1c24616818a3accfc05a79")}},42975:(e,a,r)=>{Promise.resolve().then(r.bind(r,2492))},35047:(e,a,r)=>{"use strict";var t=r(77389);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},2492:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>h});var t=r(10326),s=r(17577),i=r(35047),c=r(85277);r(45484),r(66128);var o=r(91664),d=r(29752),n=r(41190),l=r(38443),b=r(92332),u=r(8183),f=r(73183);function h(){let e=(0,i.useParams)(),a=(0,i.useRouter)(),r=e.id,[h,m]=(0,s.useState)(null),[p,g]=(0,s.useState)([]),[x,v]=(0,s.useState)([]),[j,_]=(0,s.useState)([]),[P,y]=(0,s.useState)(""),[S,E]=(0,s.useState)(!0),[w,N]=(0,s.useState)(!1),[q,C]=(0,s.useState)(!1),[k,A]=(0,s.useState)({praca_destino_id:"",prioridade:"normal",observacoes:"",tipo:"saida",data_entrega:"",janela_entrega:"manha",itens:[]}),z=e=>{let a={produto_id:e.id,quantidade_solicitada:1,observacoes:"",produto:e};A(e=>({...e,itens:[...e.itens,a]})),C(!1),y("")},I=e=>{A(a=>({...a,itens:a.itens.filter((a,r)=>r!==e)}))},O=(e,a,r)=>{A(t=>({...t,itens:t.itens.map((t,s)=>s===e?{...t,[a]:r}:t)}))},D=async e=>{e.preventDefault(),N(!0);try{let e=new FormData;e.append("praca_destino_id",k.praca_destino_id),e.append("prioridade",k.prioridade),e.append("observacoes",k.observacoes),e.append("tipo",k.tipo),e.append("data_entrega",k.data_entrega),e.append("janela_entrega",k.janela_entrega),e.append("itens",JSON.stringify(k.itens));let t=await (0,c.he)(r,e);t.success?a.push("/solicitacoes"):alert("Erro ao atualizar solicita\xe7\xe3o: "+t.error)}catch(e){console.error("Erro ao atualizar solicita\xe7\xe3o:",e),alert("Erro ao atualizar solicita\xe7\xe3o")}finally{N(!1)}};return S?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):h?t.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Editar Solicita\xe7\xe3o"}),t.jsx(o.z,{variant:"outline",onClick:()=>a.back(),children:"Voltar"})]}),(0,t.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{children:t.jsx(d.ll,{children:"Informa\xe7\xf5es B\xe1sicas"})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Pra\xe7a de Destino *"}),(0,t.jsxs)("select",{value:k.praca_destino_id,onChange:e=>A(a=>({...a,praca_destino_id:e.target.value})),required:!0,className:"w-full p-2 border border-gray-300 rounded-md",children:[t.jsx("option",{value:"",children:"Selecione uma pra\xe7a"}),p.map(e=>t.jsx("option",{value:e.id,children:e.nome},e.id))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Prioridade"}),(0,t.jsxs)("select",{value:k.prioridade,onChange:e=>A(a=>({...a,prioridade:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",children:[t.jsx("option",{value:"baixa",children:"Baixa"}),t.jsx("option",{value:"normal",children:"Normal"}),t.jsx("option",{value:"alta",children:"Alta"}),t.jsx("option",{value:"urgente",children:"Urgente"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Data de Entrega *"}),t.jsx(n.I,{type:"date",value:k.data_entrega,onChange:e=>A(a=>({...a,data_entrega:e.target.value})),required:!0,className:"w-full"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Janela de Entrega"}),(0,t.jsxs)("select",{value:k.janela_entrega,onChange:e=>A(a=>({...a,janela_entrega:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",children:[t.jsx("option",{value:"manha",children:"Manh\xe3"}),t.jsx("option",{value:"tarde",children:"Tarde"}),t.jsx("option",{value:"noite",children:"Noite"})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observa\xe7\xf5es"}),t.jsx("textarea",{value:k.observacoes,onChange:e=>A(a=>({...a,observacoes:e.target.value})),rows:3,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Observa\xe7\xf5es adicionais..."})]})]})]}),(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx(d.ll,{children:"Itens da Solicita\xe7\xe3o"}),(0,t.jsxs)(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>C(!q),children:[t.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Adicionar Item"]})]})}),(0,t.jsxs)(d.aY,{children:[q&&(0,t.jsxs)("div",{className:"mb-4 p-4 border rounded-lg bg-gray-50",children:[(0,t.jsxs)("div",{className:"relative mb-2",children:[t.jsx(u.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t.jsx(n.I,{type:"text",placeholder:"Pesquisar produtos...",value:P,onChange:e=>y(e.target.value),className:"pl-10"})]}),t.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:j.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-100 rounded cursor-pointer",onClick:()=>z(e),children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.descricao}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.produto_id," - ",e.grupo]})]}),t.jsx(l.C,{variant:"outline",children:e.tipo})]},e.id))})]}),0===k.itens.length?t.jsx("div",{className:"text-center py-8 text-gray-500",children:'Nenhum item adicionado. Clique em "Adicionar Item" para come\xe7ar.'}):t.jsx("div",{className:"space-y-4",children:k.itens.map((e,a)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.produto?.descricao}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.produto?.produto_id," - ",e.produto?.grupo]})]}),t.jsx(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>I(a),children:t.jsx(f.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantidade *"}),t.jsx(n.I,{type:"number",step:"0.01",min:"0.01",value:e.quantidade_solicitada,onChange:e=>O(a,"quantidade_solicitada",parseFloat(e.target.value)||0),required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Observa\xe7\xf5es"}),t.jsx(n.I,{type:"text",value:e.observacoes||"",onChange:e=>O(a,"observacoes",e.target.value),placeholder:"Observa\xe7\xf5es do item..."})]})]})]},a))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[t.jsx(o.z,{type:"button",variant:"outline",onClick:()=>a.back(),children:"Cancelar"}),t.jsx(o.z,{type:"submit",disabled:w||0===k.itens.length,children:w?"Salvando...":"Salvar Altera\xe7\xf5es"})]})]})]})}):t.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Solicita\xe7\xe3o n\xe3o encontrada"}),t.jsx(o.z,{className:"mt-4",onClick:()=>a.push("/solicitacoes"),children:"Voltar para solicita\xe7\xf5es"})]})})}},38443:(e,a,r)=>{"use strict";r.d(a,{C:()=>i});var t=r(10326);r(17577);var s=r(51223);function i({className:e,variant:a="default",...r}){return t.jsx("div",{className:(0,s.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}[a],e),...r})}},85277:(e,a,r)=>{"use strict";r.d(a,{MK:()=>i,SO:()=>s,W:()=>o,he:()=>c}),r(15424);var t=r(46242);(0,t.$)("5b43144e918d9633018d2a732523d2957d5c1a15");var s=(0,t.$)("6572249af1505a0ce0c5a992c44f4ac633902b93"),i=(0,t.$)("759e085f04bed7b70ac292e310d145857642a2cd");(0,t.$)("37ca45fa756f8685de66a0a84ea164df234da5af"),(0,t.$)("944e83c1db3f9ec43cbac6391ad9cc436a335795");var c=(0,t.$)("c0a962a03b467a45c784738a557f57e7ce13d407"),o=(0,t.$)("b8a9fcac0a661ac3c5eb68b0037850123b7d94a5")},82272:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$typeof:()=>c,__esModule:()=>i,default:()=>o});var t=r(68570);let s=(0,t.createProxy)(String.raw`/mnt/e/Projetos/EngenhariaContextoPTbr/ArgnKitchenFlow/ArgnKitchenFlow/src/app/solicitacoes/[id]/editar/page.tsx`),{__esModule:i,$$typeof:c}=s;s.default;let o=(0,t.createProxy)(String.raw`/mnt/e/Projetos/EngenhariaContextoPTbr/ArgnKitchenFlow/ArgnKitchenFlow/src/app/solicitacoes/[id]/editar/page.tsx#default`)},1957:(e,a,r)=>{"use strict";r.r(a),r.d(a,{atualizarSolicitacao:()=>b,atualizarStatusSolicitacao:()=>l,buscarSolicitacaoPorId:()=>n,buscarSolicitacoes:()=>d,criarSolicitacao:()=>o,deletarSolicitacao:()=>u,getDailySolicitacoesStats:()=>f});var t=r(27745);r(26461);var s=r(1862),i=r(18101),c=r(30207);async function o(e){try{let a=(0,s.createServiceClient)(),r={praca_destino_id:e.get("praca_destino_id"),solicitante:e.get("solicitante"),prioridade:e.get("prioridade"),observacoes:e.get("observacoes"),tipo:e.get("tipo"),data_entrega:e.get("data_entrega"),janela_entrega:e.get("janela_entrega"),itens:JSON.parse(e.get("itens")||"[]")},t=i.solicitacaoSchema.parse(r),{data:o,error:d}=await a.from("solicitacoes").insert({solicitante_id:"0f4a00bb-a9fd-4e00-ad29-f6e2bf1b4d47",solicitante:t.solicitante,praca_destino_id:t.praca_destino_id,prioridade:t.prioridade,observacoes:t.observacoes,tipo:t.tipo,data_entrega:t.data_entrega,janela_entrega:t.janela_entrega,loja:"Aragon"}).select().single();if(d)throw Error("Erro ao criar solicita\xe7\xe3o: "+d.message);let n=t.itens.map(e=>({solicitacao_id:o.id,produto_id:e.produto_id,quantidade_solicitada:e.quantidade_solicitada,observacoes:e.observacoes})),{error:l}=await a.from("itens_solicitacao").insert(n);if(l)throw Error("Erro ao criar itens da solicita\xe7\xe3o: "+l.message);return(0,c.revalidatePath)("/solicitacoes"),{success:!0,id:o.id}}catch(e){return console.error("Erro ao criar solicita\xe7\xe3o:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function d(e,a=1,r=30){try{let t=(0,s.createServiceClient)(),i=(a-1)*r,c=t.from("solicitacoes").select(`
        *,
        praca_destino:pracas_destino(*),
        solicitante,
        itens:itens_solicitacao(
          *,
          produto:produtos(*)
        )
      `).order("data_entrega",{ascending:!1}).range(i,i+r-1);e&&(c=c.eq("solicitante_id",e));let{data:o,error:d}=await c;if(d)throw Error("Erro ao buscar solicita\xe7\xf5es: "+d.message);return{success:!0,data:o}}catch(e){return console.error("Erro ao buscar solicita\xe7\xf5es:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function n(e){try{let a=(0,s.createServiceClient)(),{data:r,error:t}=await a.from("solicitacoes").select(`
        *,
        praca_destino:pracas_destino(*),
        solicitante,
        itens:itens_solicitacao(
          *,
          produto:produtos(*)
        )
      `).eq("id",e).single();if(t)throw Error("Erro ao buscar solicita\xe7\xe3o: "+t.message);return{success:!0,data:r}}catch(e){return console.error("Erro ao buscar solicita\xe7\xe3o:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function l(e,a){try{let r=(0,s.createServiceClient)(),{error:t}=await r.from("solicitacoes").update({status:a}).eq("id",e);if(t)throw Error("Erro ao atualizar status: "+t.message);return(0,c.revalidatePath)("/solicitacoes"),(0,c.revalidatePath)("/dashboard"),{success:!0}}catch(e){return console.error("Erro ao atualizar status:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function b(e,a){try{let r=(0,s.createServiceClient)(),t={praca_destino_id:a.get("praca_destino_id"),prioridade:a.get("prioridade"),observacoes:a.get("observacoes"),tipo:a.get("tipo"),data_entrega:a.get("data_entrega"),janela_entrega:a.get("janela_entrega"),itens:JSON.parse(a.get("itens")||"[]")},o=i.solicitacaoSchema.parse(t),{data:d,error:n}=await r.from("solicitacoes").select("status").eq("id",e).single();if(n)throw Error("Erro ao buscar solicita\xe7\xe3o: "+n.message);if("pendente"!==d.status)throw Error("N\xe3o \xe9 poss\xedvel editar solicita\xe7\xe3o que n\xe3o est\xe1 pendente");let{error:l}=await r.from("solicitacoes").update({praca_destino_id:o.praca_destino_id,prioridade:o.prioridade,observacoes:o.observacoes,tipo:o.tipo,data_entrega:o.data_entrega,janela_entrega:o.janela_entrega}).eq("id",e);if(l)throw Error("Erro ao atualizar solicita\xe7\xe3o: "+l.message);let{error:b}=await r.from("itens_solicitacao").delete().eq("solicitacao_id",e);if(b)throw Error("Erro ao deletar itens existentes: "+b.message);let u=o.itens.map(a=>({solicitacao_id:e,produto_id:a.produto_id,quantidade_solicitada:a.quantidade_solicitada,observacoes:a.observacoes})),{error:f}=await r.from("itens_solicitacao").insert(u);if(f)throw Error("Erro ao criar novos itens da solicita\xe7\xe3o: "+f.message);return(0,c.revalidatePath)("/solicitacoes"),{success:!0}}catch(e){return console.error("Erro ao atualizar solicita\xe7\xe3o:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function u(e){try{let a=(0,s.createServiceClient)(),{data:r,error:t}=await a.from("solicitacoes").select(`
        status,
        itens:itens_solicitacao(status_separacao)
      `).eq("id",e).single();if(t)throw Error("Erro ao buscar solicita\xe7\xe3o: "+t.message);if(!r.itens.every(e=>"aguardando"===e.status_separacao))throw Error('N\xe3o \xe9 poss\xedvel deletar solicita\xe7\xe3o que possui itens fora do status "Aguardando"');let{error:i}=await a.from("solicitacoes").delete().eq("id",e);if(i)throw Error("Erro ao deletar solicita\xe7\xe3o: "+i.message);return(0,c.revalidatePath)("/solicitacoes"),{success:!0}}catch(e){return console.error("Erro ao deletar solicita\xe7\xe3o:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async function f(){try{let e=(0,s.createServiceClient)(),a=new Date;a.setHours(0,0,0,0);let r=new Date(a);r.setDate(r.getDate()+1);let t=new Date(a);t.setDate(t.getDate()-1);let{count:i,error:c}=await e.from("solicitacoes").select("*",{count:"exact",head:!0}).gte("created_at",a.toISOString()).lt("created_at",r.toISOString());if(c)throw Error(c.message);let{count:o,error:d}=await e.from("solicitacoes").select("*",{count:"exact",head:!0}).gte("created_at",t.toISOString()).lt("created_at",a.toISOString());if(d)throw Error(d.message);return{success:!0,data:{today:i||0,variation:parseFloat((o&&o>0?((i||0)-o)/o*100:(i||0)>0?100:0).toFixed(2))}}}catch(e){return console.error("Erro ao buscar estat\xedsticas di\xe1rias de solicita\xe7\xf5es:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}(0,r(85723).ensureServerEntryExports)([o,d,n,l,b,u,f]),(0,t.registerServerReference)("6572249af1505a0ce0c5a992c44f4ac633902b93",o),(0,t.registerServerReference)("759e085f04bed7b70ac292e310d145857642a2cd",d),(0,t.registerServerReference)("37ca45fa756f8685de66a0a84ea164df234da5af",n),(0,t.registerServerReference)("944e83c1db3f9ec43cbac6391ad9cc436a335795",l),(0,t.registerServerReference)("c0a962a03b467a45c784738a557f57e7ce13d407",b),(0,t.registerServerReference)("b8a9fcac0a661ac3c5eb68b0037850123b7d94a5",u),(0,t.registerServerReference)("5b43144e918d9633018d2a732523d2957d5c1a15",f)},92332:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8183:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},73183:(e,a,r)=>{"use strict";r.d(a,{Z:()=>t});let t=(0,r(87926).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};var a=require("../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[972,130,207,592,629,801],()=>r(37900));module.exports=t})();